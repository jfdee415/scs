document.addEventListener("DOMContentLoaded", () => {
  const pathname = window.location.pathname;

  // === RESULT PAGE ===
  if (pathname === "/result.html") {
    const card = JSON.parse(localStorage.getItem("socialCreditCard"));
    if (!card) return (window.location.href = "/");

    // Log card data for debugging
    console.log("Card data from localStorage:", card);

    // Display all the new social credit elements
    document.getElementById("loyaltyLevel").innerText = `Loyalty Level: ${card.loyaltyLevel}`;
    document.getElementById("socialCreditScore").innerText = `Social Credit: ${card.socialCredit}`;
    document.getElementById("tagline").innerText = `Tagline: ${card.tagline}`;
    document.getElementById("followers").innerText = `Followers: ${card.followers}`;
    document.getElementById("following").innerText = `Following: ${card.following}`;
    document.getElementById("card_name").innerText = `Comrade ${card.handle}`;

    // Set the profile picture (avatar)
    const avatar = document.getElementById("avatar");
    avatar.src = card.avatar || "default-avatar.png";

    // Show the card
    const cardContainer = document.getElementById("cardContainer");
    cardContainer.classList.remove("hidden");
  }
});
